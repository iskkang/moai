<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MTL Dashboard</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin=""/>

    <!-- vendor css -->
    <link href="/lib/fontawesome-free/css/all.min.css" rel="stylesheet">
    <link href="/lib/ionicons/css/ionicons.min.css" rel="stylesheet">
    <link href="/lib/typicons.font/typicons.css" rel="stylesheet">
    <link href="/lib/flag-icon-css/css/flag-icon.min.css" rel="stylesheet">


        <!-- azia CSS -->
        <link rel="stylesheet" href="/css/azia.css">
     <style>
    body {
      font-family: Arial, sans-serif;
    }
    .article {
      margin-bottom: 20px;
    }
    .article a {
      font-size: 1.2em;
      font-weight: bold;
      color: #007bff;
      text-decoration: none;
    }
    .article p {
      color: #555;
    }
  </style>
  </head>
<body>
  <div class="az-header">
    <div class="container">
      <div class="az-header-left">
          <a href="index.html" class="mtl-logo"><span></span> MIJI</a>
          <a href="" id="azMenuShow" class="az-header-menu-icon d-lg-none"><span></span></a>
        </div><!-- az-header-left -->
        <div class="az-header-menu">
          <div class="az-header-menu-header">
            <a href="index.html" class="mtl-logo"><span></span> MTL</a>
            <a href="" class="close">&times;</a>
          </div><!-- az-header-menu-header -->
        <div class="row justify-content-between">
            <h1 class="h2"></h1>
        </div>
        </div>
      </div><!-- container -->
    </div>
  </div><!-- az-header-menu -->

  <div class="az-content az-content-dashboard">
    <div class="container">
      <div class="az-content-body">
        <div class="az-dashboard-one-title">
          <div>
            <h2 class="az-dashboard-title">Welcome!</h2>
            <p class="az-dashboard-text">물류 시황을 공유합니다.</p>
          </div>
          <div class="az-content-header-right">
            <div class="media">
              <div class="media-body">
                <label></label>
                <h6></h6>
              </div><!-- media-body -->
            </div><!-- media -->
            <div class="media">
              <div class="media-body">
                <label>Today</label>
                <h6 id="today-date"></h6>
              </div><!-- media-body -->
            </div><!-- media -->
            <div class="media">
              <div class="media-body">
                <label></label>
                <h6></h6>
              </div><!-- media-body -->
            </div><!-- media -->
            <a href="" class="btn btn-purple">Export</a>
          </div>
        </div><!-- az-dashboard-one-title -->
        
        <div class="row row-sm mg-b-20">
          <div class="col-lg-7 ht-lg-100p">
            <div class="card card-dashboard-one">
              <div class="card-header">
                 <div>
                    <h4 class="card-title">SCFI</h4>
                    <p class="card-text">Shanghai Containerized Freight Index</p>
                  </div>
                </div><!-- card-header -->
               <div class="card-body">
                 <div class="card-body-top">
                     <div>
                       <label class="mg-b-0">Observed:</label>
                         <p>Actual rates in the Shanghai Europe trade</p>
                      </div>
                      <div>
                        <label class="mg-b-0">Future(선물지수):</label>
                           <p>INE SCFI index</p>
                       </div>
                        <div>
                          <label class="mg-b-0">Forward curve: </label>
                           <p>INE SCFI forward</p>
                            </div>
           
                          </div><!-- card-body-top -->
                          <div class="flot-chart-wrapper">
                            <div id="scfiChart" class="chart-container" style=" height: 415px;"></div>
                </div><!-- flot-chart-wrapper -->
            </div><!-- card-body -->
          </div><!-- card -->
        </div><!-- col -->
        <div class="col-lg-5 mg-t-20 mg-lg-t-0">
          <div class="row row-sm">
            <div class="col-sm-6">
              <div class="card card-dashboard-two">
                <div class="card-header" id="scfiDifference">
                  <h6><span class="latest-value"></span> <i class="icon"></i> <small><span class="percentage"></span></small></h6>
                  <a href="https://www.nlic.go.kr/nlic/transInPortCt.action" target='_blank' class="btn btn-pink" >SCFI</a>
                </div><!-- card-header -->
                <div class="card-body">
                  <div class="chart-wrapper">
                    <div id="flotChart1" class="flot-chart"></div>
                  </div><!-- chart-wrapper -->
                </div><!-- card-body -->
              </div><!-- card -->
            </div><!-- col -->
            <div class="col-sm-6 mg-t-20 mg-sm-t-0">
              <div class="card card-dashboard-two">
                <div class="card-header" id="bdiDifference">
                  <h6><span class="latest-value"></span> <i class="icon"></i> <small><span class="percentage"></span></small></h6>
                  <a href="https://www.nlic.go.kr/nlic/transInPortCt.action" target='_blank' class="btn btn-pink" >BDI</a>
                </div><!-- card-header -->
                <div class="card-body">
                  <div class="chart-wrapper">
                    <div id="flotChart2" class="flot-chart"></div>
                  </div><!-- chart-wrapper -->
                </div><!-- card-body -->
              </div><!-- card -->
            </div><!-- col -->
            <div class="col-sm-12 mg-t-20">
              <div class="card card-dashboard-four">
                <div class="card-header">
                    <h8 class="card-title">  Freight Index</h8>
                    <p class="card-text">Click on each Index</p>
                </div><!-- card-header -->
                <div class="card-body">
                  <div class="az-dashboard-one-title">
                   <div class="btn-group">
                      <button class="btn active" onclick="loadChartData('BDI')">BDI</button>
                      <button class="btn" onclick="loadChartData('HRCI')">HRCI</button>
                      <button class="btn" onclick="loadChartData('SCFI')">SCFI</button>
                      <button class="btn" onclick="loadChartData('KCCI')">KCCI</button>
                      <button class="btn" onclick="loadChartData('KDCI')">KDCI</button>
                    </div>
                  </div>
                </div>
                <div class="container">
                  <canvas id="bdiChart" ></canvas>
                </div>
              
              </div>
            </div>
          </div><!-- row -->
        </div><!--col -->
      </div><!-- row -->

      <div class="row row-sm mg-b-20">
        <div class="col-lg-6 ht-lg-100p">
          <div class="card card-dashboard-one">
          <div class="card-header">
              <h2 class="card-title">NEWS Table</h2>
        </div><!-- card-header -->
          <div class="card-body">
            <div class="az-dashboard-one-title">
              <div class="btn-group">
                  <button class="btn active" onclick="loadNews('해상운임')">해상운임</button>
                  <button class="btn" onclick="loadNews('항공운임')">항공운임</button>
                  <button class="btn" onclick="loadNews('철도')">철도</button>
                  <button class="btn" onclick="loadNews('물류')">물류</button>
                  <button class="btn" onclick="loadNews('Shipping')">Shipping</button>
                </div>
              </div>
              <div id="newsContainer"></div>
              <button id="moreButton" class="btn btn-secondary" onclick="loadMoreNews()" style="display: none;">More</button>
        </div><!-- card-body -->
      </div><!-- card -->
    </div><!-- col -->
    <div class="col-lg-6 ht-lg-100p">
        <div class="card card-dashboard-one">
            <div class="card-header">
                <h2 class="card-title">Media Table</h2>
          </div><!-- card-header -->
            <div class="card-body">
              <div class="az-dashboard-one-title">
                <div class="btn-group">
                  <button class="btn active media-button" data-source="Freight" onclick="loadMedia('Freight')">Freight</button>
                  <button class="btn media-button" data-source="Splash" onclick="loadMedia('Splash')">Splash</button>
                  <button class="btn media-button" data-source="Lloyd" onclick="loadMedia('Lloyd')">Lloyd</button>
                  <button class="btn media-button" data-source="Loadstar" onclick="loadMedia('Loadstar')">Loadstar</button>
                  <button class="btn media-button" data-source="Intelligence" onclick="loadMedia('Intelligence')">Intelligence</button>
                  <button class="btn media-button" data-source="Seanews" onclick="loadMedia('Seanews')">Seanews</button>
              </div>
            </div>
              <table id="mediaTable">           
                <tbody id="mediaTableBody">
                    <!-- Media articles will be inserted here -->
                </tbody>
            </table>
              <button id="moreButton" class="btn btn-secondary" onclick="loadMoreMedia()" style="display: none;">More</button>
          </div><!-- card-body -->
        </div><!-- card -->
        </div><!-- col -->
 </div>


     

      <div class="row row-sm mg-b-20">
        <div class="col-lg-4">
          <div class="card card-dashboard-pageviews">
            <div class="card-header">
               <h6 class="card-title">TEU Comparison</h6>
               <p class="card-text">Base Month `24 vs `23</p>
                </div><!-- card-header -->
                <div class="card-body">
                  <div id="portComparisonChart" style= "height: 430px;"></div>
                    
                </div><!-- card-body -->
              </div><!-- card -->
            </div><!-- col -->
            <div class="col-lg-8 mg-t-20 mg-lg-t-0">
              <div class="card card-dashboard-four">
                <div class="card-header">
                  <h6 class="card-title">Port Map</h6>
                </div><!-- card-header -->
                <div class="card-body row">
                  <div class="col-lg-12">
                   <div id="map" style="width: 100%; height: 450px;"></div>
                  </div><!-- col -->
                </div><!-- card-body -->
              </div><!-- card-dashboard-four -->
            </div><!-- col -->
          </div><!-- row -->
  
           <div class="row row-sm mg-b-20">
            <div class="col-lg-12 ht-lg-100p">
              <div class="card card-dashboard-four">
              <div class="card-header">
                <div>
                <h2 class="card-title">Major Port Rank</h2>
                <p class="card-text"></p>
                </div>
              <div class="card-body">
                <table id="portTable" class="display table table-striped table-bordered">
                  <thead>
                      <tr>
                          <th>Rank</th>
                          <th>Name</th>
                          <th>Last Imp TEU</th>
                          <th>Last Exp TEU</th>
                          <th>Last Imp TEU MoM</th>
                          <th>Last Exp TEU MoM</th>
                          <th>Delay</th>
                          <th>Imp Dwell Day</th>
                          <th>Exp Dwell Day</th>
                          <th>TS Dwell Day</th>
                      </tr>
                  </thead>
                  <tbody id="portTableBody"></tbody>
              </table>
              </div>
            </div>
          </div>
         </div>
       </div>

       <div class="row row-sm mg-b-20">
        <div class="col-lg-12 ht-lg-100p">
          <div class="card card-dashboard-four">
          <div class="card-header">
            <div>
            <h2 class="card-title">Global Trade Chart</h2>
            <p class="card-text">세계 권역별 무역량 그래프</p>
            </div>
          <div class="card-body">
            <div class="az-dashboard-one-title">
              <div id="globalTradeChart" class="chart-container" style= "width: 1200px; height: 400px;"></div>
              </div>              
              </div>
            </div>
          </div>
         </div>
       </div>

       <div class="row row-sm mg-b-20">
        <div class="col-lg-4">
          <div class="card card-dashboard-pageviews">
            <div class="card-header">
               <h6 class="card-title">Map</h6>
               <p class="card-text">Disaster</p>
                </div><!-- card-header -->
                <div class="card-body">
                  <div id="disastermap" style= "height: 540px;"></div>
                    
                </div><!-- card-body -->
              </div><!-- card -->
            </div><!-- col -->
            <div class="col-lg-8 mg-t-20 mg-lg-t-0">
              <div class="card card-table-one">
                <h6 class="card-title">Disaster Data</h6>
                <p class="az-content-text mg-b-20">Part of this date range occurs before the new users metric had been calculated.</p>
                <div class="table-responsive">
                  <table id="disasterTable" class="table">
                    <thead>
                      <tr>
                          <th>LV</th>
                          <th>Title</th>
                          <th>Date</th>
                          <th>Report</th>
                      </tr>
                  </thead>
                  <tbody id="disasterTableBody"></tbody>
              </table>
            </div><!-- table-responsive -->
          </div><!-- card -->
            </div><!-- col -->
          </div><!-- row -->
          <div class="row row-sm mg-b-20">
        <div class="col-lg-4">
          <div class="card card-dashboard-pageviews">
            <div class="card-header">
               <h6 class="card-title">Map</h6>
               <p class="card-text">Disaster</p>
                </div><!-- card-header -->
                <div class="card-body">
                   <div id="articles" class="articles"></div>
                    
                </div><!-- card-body -->
              </div><!-- card -->
            </div><!-- col -->
            <div class="col-lg-8 mg-t-20 mg-lg-t-0">
              <div class="card card-table-one">
                          <h1 class="mt-4">Weekly Downloads</h1>
                  <table>
    <thead>
        <tr>
            <th>Title</th>
            <th>PDF Link</th>
        </tr>
    </thead>
    <tbody id="report-table-body">
        <!-- Reports will be dynamically inserted here -->
    </tbody>
</table>
            

    </div>
    </div>
    </div>
    
    <div class="az-footer ht-40">
      <div class="container ht-100p pd-t-0-f">
        <span class="text-muted d-block text-center text-sm-left d-sm-inline-block">Copyright © MTL 2024</span>
        <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center"> Click <a href="https://www.mtlb.co.kr/" target="_blank">MTL</a> from mtlb.co.kr</span>
      </div><!-- container -->
    </div><!-- az-footer -->

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="/app.js"></script>
    <script src="/map.js"></script>
    <script src="/news.js"></script>
    <script src="/scfi.js"></script>
    <script src="/portComparison.js"></script>
    <script src="/globalExports.js"></script>
    <script src="/portDataTable.js"></script>
    <script src="/disaster.js"></script>
    <script src="/bdi.js"></script>
    <script src="/disasterMap.js"></script>
    <script src="/differ.js"></script>
    <script src="/insight.js"></script>
    <script src="/weekly.js"></script>

    <script src="lib/jquery/jquery.min.js"></script>
    <script src="lib/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="lib/ionicons/ionicons.js"></script>
    <script src="lib/jquery.flot/jquery.flot.js"></script>
    <script src="lib/jquery.flot/jquery.flot.resize.js"></script>
    <script src="lib/chart.js/Chart.bundle.min.js"></script>
    <script src="lib/peity/jquery.peity.min.js"></script>
    
    

    <script src="/js/azia.js"></script>
    <script src="/js/chart.flot.sampledata.js"></script>
    <script src="/js/dashboard.sampledata.js"></script>
    <script src="/js/cookie.js" type="text/javascript"></script>
    <script src="/js/today.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script>
    // 페이지 로드 시 articles 데이터를 가져와서 화면에 렌더링
    document.addEventListener('DOMContentLoaded', async () => {
      try {
        const response = await fetch('/api/articles');
        const articles = await response.json();

        const articlesContainer = document.getElementById('articles');

        articles.forEach(article => {
          const articleDiv = document.createElement('div');
          articleDiv.classList.add('article');

          const articleLink = document.createElement('a');
          articleLink.href = article.link;
          articleLink.target = '_blank';
          articleLink.textContent = article.title;

          const articleDate = document.createElement('p');
          articleDate.textContent = article.date;

          articleDiv.appendChild(articleLink);
          articleDiv.appendChild(articleDate);

          articlesContainer.appendChild(articleDiv);
        });
      } catch (error) {
        console.error('Error fetching articles:', error);
      }
    });
  </script>

    

</body>
</html>
